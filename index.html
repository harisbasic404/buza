<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <title>NTP Odbrojavanje & Pobijedi Buzu</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            min-height: 100vh;
            margin: 0;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            font-family: 'Roboto', Arial, sans-serif;
        }
        .container {
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(8px);
            border-radius: 30px;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
            padding: 50px 40px 40px 40px;
            text-align: center;
            max-width: 420px;
            width: 95%;
            margin-top: 40px;
        }
        .event-title {
            font-family: 'Montserrat', Arial, sans-serif;
            font-size: 2.8em;
            letter-spacing: 2px;
            color: #fff;
            margin-bottom: 16px;
            text-shadow: 0 4px 24px #0002, 0 1px 0 #2224;
        }
        .subtext {
            font-size: 1.15em;
            color: #f2f2f2;
            margin-bottom: 32px;
        }
        .countdown {
            display: flex;
            justify-content: space-between;
            gap: 16px;
        }
        .time-box {
            background: rgba(255,255,255,0.18);
            border-radius: 18px;
            box-shadow: 0 2px 10px #0002;
            padding: 18px 12px;
            min-width: 65px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background 0.3s;
        }
        .time-box:hover {
            background: rgba(255,255,255,0.28);
        }
        .number {
            font-size: 2.5em;
            font-weight: 700;
            color: #fff;
            font-family: 'Montserrat', Arial, sans-serif;
            letter-spacing: 1px;
            margin-bottom: 4px;
            text-shadow: 0 2px 8px #0003;
            transition: color 0.2s;
        }
        .label {
            font-size: 1em;
            color: #f5f5fa;
            letter-spacing: 1px;
            font-family: 'Roboto', Arial, sans-serif;
        }
        .started {
            font-size: 1.5em;
            color: #fff;
            margin-top: 25px;
            font-weight: bold;
            text-shadow: 0 2px 10px #0004;
        }
        .game-container {
            margin: 38px auto 0 auto;
            background: rgba(255,255,255,0.13);
            border-radius: 20px;
            box-shadow: 0 2px 14px #0002;
            padding: 25px;
            max-width: 500px;
        }
        #game-title {
            color: #fff;
            font-size: 2em;
            font-family: 'Montserrat', Arial, sans-serif;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px #0004;
        }
        #score {
            color: #fff;
            font-size: 1.2em;
            font-family: 'Roboto', Arial, sans-serif;
            margin-bottom: 12px;
        }
        #gameCanvas {
            background: #141e30;
            border-radius: 12px;
            box-shadow: 0 3px 20px #0004;
            display: block;
            margin: 0 auto;
            border: 2px solid #fff5;
        }
        @media (max-width: 600px) {
            .container,
            .game-container {
                padding: 16px 2vw;
                max-width: 98vw;
            }
            #gameCanvas {
                width: 96vw !important;
                height: 300px !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="event-title">NTP</div>
        <div class="subtext">Odbrojavanje do početka događaja</div>
        <div class="countdown" id="countdown">
            <div class="time-box">
                <span class="number" id="days">00</span>
                <span class="label">dana</span>
            </div>
            <div class="time-box">
                <span class="number" id="hours">00</span>
                <span class="label">sati</span>
            </div>
            <div class="time-box">
                <span class="number" id="minutes">00</span>
                <span class="label">minuta</span>
            </div>
            <div class="time-box">
                <span class="number" id="seconds">00</span>
                <span class="label">sekundi</span>
            </div>
        </div>
        <div class="started" id="started" style="display:none;">
            Događaj je započeo!
        </div>
    </div>
    <div class="game-container">
        <div id="game-title">Pobijedi Buzu</div>
        <div id="score">Rezultat: <span id="scoreNum">0</span></div>
        <canvas id="gameCanvas" width="420" height="340"></canvas>
        <div style="color:#fff9; font-size:0.95em; margin-top:10px;">Prereži Buzu! (Povuci mišem ili prstom po glavi)</div>
    </div>
    <script>
        // Odbrojavanje
        const eventDate = new Date("2025-09-08T09:00:00");
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const countdownEl = document.getElementById('countdown');
        const startedEl = document.getElementById('started');

        function pad(n) {
            return n.toString().padStart(2, '0');
        }

        function updateCountdown() {
            const now = new Date();
            const diff = eventDate - now;

            if (diff <= 0) {
                countdownEl.style.display = 'none';
                startedEl.style.display = 'block';
                clearInterval(timerInterval);
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            daysEl.textContent = pad(days);
            hoursEl.textContent = pad(hours);
            minutesEl.textContent = pad(minutes);
            secondsEl.textContent = pad(seconds);
        }

        updateCountdown();
        const timerInterval = setInterval(updateCountdown, 1000);

        // --- Igra "Pobijedi Buzu" ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreNum = document.getElementById('scoreNum');
        let score = 0;

        // Slika glave
        const headImg = new Image();
        headImg.src = "buza.png"; // stavi svoju sliku u isti folder!

        // Parametri glave
        let head = {
            x: 80, y: 340, w: 80, h: 80,
            vx: 2 + Math.random()*2, vy: -(8 + Math.random()*5),
            gravity: 0.32,
            alive: true,
            sliced: false,
            rot: 0,
            vrot: (Math.random()-0.5)*0.2
        };

        // Efekti krvi
        let bloodParticles = [];

        // Generiraj novu glavu
        function spawnHead() {
            head.x = 50 + Math.random() * (canvas.width-100);
            head.y = canvas.height + 60;
            head.w = 80; head.h = 80;
            head.vx = (Math.random()-0.5)*4;
            head.vy = - (8 + Math.random()*6);
            head.gravity = 0.32 + Math.random()*0.1;
            head.alive = true;
            head.sliced = false;
            head.rot = 0;
            head.vrot = (Math.random()-0.5)*0.2;
        }

        // Krvavi čestice
        function spawnBlood(x, y) {
            for(let i=0;i<25;i++){
                bloodParticles.push({
                    x: x, y: y,
                    vx: (Math.random()-0.5)*8,
                    vy: (Math.random()-0.7)*8,
                    alpha: 1,
                    r: 4 + Math.random()*5
                });
            }
        }

        // Detekcija reza
        let lastMouse = null;
        let slicing = false;

        function pointInHead(x, y) {
            return x > head.x && x < head.x+head.w && y > head.y && y < head.y+head.h;
        }

        function trySlice(x, y, px, py) {
            // linija reza presijeca glavu?
            if(!head.alive) return;
            if (pointInHead(x, y) || (px && pointInHead(px, py))) {
                head.sliced = true;
                head.alive = false;
                score++;
                scoreNum.textContent = score;
                spawnBlood(head.x+head.w/2, head.y+head.h/2);
                setTimeout(spawnHead, 650);
            }
        }

        // Miš/touch
        canvas.addEventListener('mousedown', e => { slicing = true; lastMouse = getMouse(e); });
        canvas.addEventListener('mousemove', e => {
            if (slicing) {
                const pos = getMouse(e);
                trySlice(pos.x, pos.y, lastMouse.x, lastMouse.y);
                lastMouse = pos;
            }
        });
        canvas.addEventListener('mouseup', e => { slicing = false; lastMouse = null; });

        canvas.addEventListener('touchstart', e => {
            slicing = true;
            lastMouse = getTouch(e);
        });
        canvas.addEventListener('touchmove', e => {
            if (slicing) {
                const pos = getTouch(e);
                trySlice(pos.x, pos.y, lastMouse.x, lastMouse.y);
                lastMouse = pos;
            }
        });
        canvas.addEventListener('touchend', e => { slicing = false; lastMouse = null; });

        function getMouse(e) {
            const rect = canvas.getBoundingClientRect();
            return {
                x: (e.clientX - rect.left) * (canvas.width/rect.width),
                y: (e.clientY - rect.top) * (canvas.height/rect.height)
            };
        }
        function getTouch(e) {
            const rect = canvas.getBoundingClientRect();
            const t = e.touches[0];
            return {
                x: (t.clientX - rect.left) * (canvas.width/rect.width),
                y: (t.clientY - rect.top) * (canvas.height/rect.height)
            };
        }

        // Animacija
        function draw() {
            ctx.clearRect(0,0,canvas.width,canvas.height);

            // Glava
            if (head.alive || head.sliced) {
                ctx.save();
                ctx.translate(head.x+head.w/2, head.y+head.h/2);
                ctx.rotate(head.rot);
                if(head.sliced){
                    // Dvije polovice
                    ctx.save();
                    ctx.translate(-head.w/4, 0);
                    ctx.rotate(-0.4);
                    ctx.drawImage(headImg, -head.w/2, -head.h/2, head.w/2, head.h);
                    ctx.restore();

                    ctx.save();
                    ctx.translate(head.w/4, 0);
                    ctx.rotate(0.4);
                    ctx.drawImage(headImg, 0, -head.h/2, head.w/2, head.h);
                    ctx.restore();
                }else{
                    ctx.drawImage(headImg, -head.w/2, -head.h/2, head.w, head.h);
                }
                ctx.restore();
            }

            // Krv
            for(let p of bloodParticles){
                ctx.save();
                ctx.globalAlpha = p.alpha;
                ctx.fillStyle = "#d90000";
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, 2*Math.PI);
                ctx.fill();
                ctx.restore();
            }
        }

        function update() {
            // Glava fizika
            if(head.alive){
                head.x += head.vx;
                head.y += head.vy;
                head.vy += head.gravity;
                head.rot += head.vrot;

                // Odbijanje od stijenki
                if(head.x<0) { head.x=0; head.vx*=-1; }
                if(head.x+head.w>canvas.width) { head.x=canvas.width-head.w; head.vx*=-1; }
                // Ispod ekrana: respawn
                if(head.y>canvas.height+120) spawnHead();
            }
            // Krv
            for(let p of bloodParticles){
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.34;
                p.alpha -= 0.025;
            }
            bloodParticles = bloodParticles.filter(p=>p.alpha>0);
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Start
        headImg.onload = () => {
            spawnHead();
            gameLoop();
        }
    </script>
</body>
</html>
